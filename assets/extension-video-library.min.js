function onImagesLoaded(t){return t=t||document,Promise.all(Array.prototype.slice.call(t.querySelectorAll("img")).filter(function(t){return!t.complete}).map(function(t){return new Promise((e,i)=>{t.addEventListener("load",function(){return e(t)}),t.addEventListener("error",function(){return i(t)})})}))}!function(){"use strict";var t="videoLibrary",e={RENDER:t+":render",PLAYER_READY:t+":playerReady",PLAYERS_READY:t+":ready"},i=!1,a=!1,l=[];function s(){a=!0,l.forEach(function(t){t()})}var r=!1,o=!1,n=[];function $(){o=!0,n.forEach(function(t){t()})}window.VideoLibrary=Util.createExtension({defaults:{ids:"",layout:"grid",showTitle:!0,showDuration:!0,playInline:!1,useLoader:!0,template:null,templateData:{}},optionTypes:{ids:"string",layout:"string",showTitle:"boolean",showDuration:"boolean",playInline:"boolean",useLoader:"boolean",template:"(string|null)",templateData:"object"},initialize:function(t){if(-1===["grid","carousel","tabs"].indexOf(t.layout)&&(this.options.layout="grid"),"carousel"===this.options.layout&&"function"!=typeof Swiper&&(this.options.layout="grid"),!1!==this.options.playInline||window.jQuery&&window.jQuery.hasOwnProperty("fancybox")||(this.options.playInline=!0),this.numberPlayersReady=0,this.youTubePlayers=this.vimeoPlayers=[],this.ids=t.ids.split(",").map(function(t){return t.trim()}),this.youTubeIds=this.ids.filter(function(t){return 11===t.length}),this.vimeoIds=this.ids.filter(function(t){return/^[0-9]+$/.test(t)&&t.length<10}),this.el.classList.add("hidden"),this.options.useLoader&&this.renderLoader(),this.render(),this.youTubeIds.length){var e;e=this.createYouTubePlayers.bind(this),i||(function t(){if(!Array.prototype.filter.call(document.scripts,function(t){return"https://www.youtube.com/player_api"===t.src}).length){var e=document.createElement("script");e.src="https://www.youtube.com/player_api";var a=document.head.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}i=!0}(),a||(void 0===window.YT?window.onYouTubeIframeAPIReady=s:s())),a?e():l.push(e)}this.vimeoIds.length&&function t(e){if(!r){var i,a;(i=document.createElement("script")).onload=$,i.src="https://player.vimeo.com/api/player.js",(a=document.head.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a),r=!0}o?e():n.push(e)}(this.createVimeoPlayers.bind(this))},formatDuration:function(t){var e,i=Math.floor((t=parseInt(t,10))/3600);return[i,Math.floor(t/60)%60,t%=60].map(t=>t<10?"0"+t:t).filter((t,e)=>"00"!==t||e>0).join(":")},createYouTubePlayers:function(){this.youTubePlayers=this.youTubeIds.map(this.createYouTubePlayer.bind(this))},createYouTubePlayer:function(t){var e=this.onYouTubePlayerReady.bind(this);return new YT.Player(t,{videoId:t,events:{onReady:function(i){e(i.target,t)}}})},onYouTubePlayerReady:function(t,e){var i=t.getVideoData(),a=t.getIframe(),l={player:t,title:i.title,url:"https://www.youtube.com/watch?v="+e,duration:this.formatDuration(t.getDuration()),thumbnail:"https://img.youtube.com/vi/"+e+"/1.jpg",relatedTarget:a},s=this;Array.prototype.forEach.call(document.querySelectorAll('[data-title="'+e+'"]'),function(t){t.innerText=l.title}),Array.prototype.forEach.call(document.querySelectorAll('[data-url="'+e+'"]'),function(t){"A"===t.tagName&&(t.href=l.url)}),Array.prototype.forEach.call(document.querySelectorAll('[data-duration="'+e+'"]'),function(t){t.innerText=l.duration}),Array.prototype.forEach.call(document.querySelectorAll('[data-thumbnail="'+e+'"]'),function(t){"IMG"===t.tagName&&(t.src=l.thumbnail)});var r=a.parentNode;a.classList.add("invisible"),r.style.backgroundImage="url(https://img.youtube.com/vi/"+e+"/0.jpg)",r.classList.add("bg-cover"),r.classList.add("bg-center"),r.classList.add("cursor-pointer"),this.options.playInline&&r.addEventListener("click",function(){s.stopAllPlayers(),s.startYouTubePlayer(t)}),s.onPlayerReady.bind(this)(l)},startYouTubePlayer:function(t){var e=t.getIframe();t.playVideo(),e.classList.remove("invisible")},stopYouTubePlayer:function(t){var e=t.getIframe();t.stopVideo(),e.classList.add("invisible")},createVimeoPlayers:function(){this.vimeoPlayers=this.vimeoIds.map(this.createVimeoPlayer.bind(this))},createVimeoPlayer:function(t){var e=new Vimeo.Player(t,{id:t}),i=this.onVimeoPlayerReady.bind(this);return e.ready().then(function(){i(e,t)}),e},onVimeoPlayerReady:function(t,e){var i=this;fetch(`https://vimeo.com/api/oembed.json?url=https://vimeo.com/${e}?width=480&height=360`).then(function(t){return t.json()}).then(function(a){var l=t.element,s={player:t,title:a.title,url:"https://vimeo.com/"+e,duration:i.formatDuration(a.duration),thumbnail:a.thumbnail_url,relatedTarget:l},r=l.parentNode;l.className=r.className,r.parentNode.insertBefore(l,r),r.remove(),l.classList.add("invisible"),Array.prototype.forEach.call(document.querySelectorAll('[data-title="'+e+'"]'),function(t){t.innerText=s.title}),Array.prototype.forEach.call(document.querySelectorAll('[data-url="'+e+'"]'),function(t){"A"===t.tagName&&(t.href=s.url)}),Array.prototype.forEach.call(document.querySelectorAll('[data-duration="'+e+'"]'),function(t){t.innerText=s.duration}),Array.prototype.forEach.call(document.querySelectorAll('[data-thumbnail="'+e+'"]'),function(t){"IMG"===t.tagName&&(t.src=s.thumbnail)}),(r=l.parentNode).style.backgroundImage="url("+s.thumbnail+")",r.classList.add("bg-cover"),r.classList.add("bg-center"),r.classList.add("cursor-pointer"),i.options.playInline&&r.addEventListener("click",function(){i.stopAllPlayers(),i.startVimeoPlayer(t)}),i.onPlayerReady.bind(i)(s)})},startVimeoPlayer:function(t){t.play(),t.element.classList.remove("invisible")},stopVimeoPlayer:function(t){t.pause(),t.element.classList.add("invisible")},onPlayerReady(t){Util.triggerEvent(this.el,e.PLAYER_READY,t),this.numberPlayersReady++,this.numberPlayersReady===this.ids.length&&onImagesLoaded().then(this.onPlayersReady.bind(this))},onPlayersReady:function(){this.el.classList.remove("hidden"),"carousel"===this.options.layout&&this.initializeCarousel(),"tabs"===this.options.layout&&this.initializeTabs(),this.options.useLoader&&this.loader.remove(),Util.triggerEvent(this.el,e.PLAYERS_READY,{relatedTarget:this.el,players:this.players})},stopAllPlayers:function(){this.youTubePlayers.forEach(this.stopYouTubePlayer.bind(this)),this.vimeoPlayers.forEach(this.stopVimeoPlayer.bind(this))},initializeCarousel:function(){this.el.classList.add("swiper-container","swiper-container-"+this.instanceNumber,"relative","overflow-hidden"),this.swiper=new Swiper(".swiper-container-"+this.instanceNumber,{loop:!1,threshold:10,breakpoints:{768:{slidesPerView:this.el.getAttribute("data-columns")||2,spaceBetween:32}},pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-next",prevEl:".swiper-prev",disabledClass:"opacity-0",hiddenClass:"invisible"}}),this.swiper.on("slideChange",this.stopAllPlayers.bind(this))},initializeTabs:function(){this.el.addEventListener("tab:shown",this.stopAllPlayers.bind(this))},renderLoader:function(){var t,e=this.el.getAttribute("data-columns")||2;switch(e<1&&(e=1),e>3&&(e=3),this.options.layout){case"tabs":t='<div class="p-3"><div class="row row-flush"><div class="md:col-8"><div class="relative w-full ratio ratio-16-9"><div class="skeleton absolute top-0 left-0 w-full h-full"></div></div></div><div class="md:col"><div class="absolute top-0 bottom-0 w-full h-full md:ml-3"><div class="skeleton absolute top-0 left-0 h-full w-full"></div></div></div></div></div>';break;case"carousel":var i='<li class="mb-6 md:col-'+12/e+'"><div class="relative w-full ratio ratio-16-9"><div class="skeleton absolute top-0 left-0 h-full w-full"></div></div></li>';t='<ul class="list-unstyled row">';for(var a=0;a<e;a++)t+=i;t+="</ul>";break;default:t='<ul class="list-unstyled row my-6">'+(t=this.ids.map(function(t){return'<li class="mb-6 md:col-'+12/e+'"><div class="relative w-full ratio ratio-16-9"><div class="skeleton absolute top-0 left-0 h-full w-full"></div></div></li>'}).join(""))+"</ul>"}this.loader=document.createElement("div"),"carousel"===this.options.layout&&this.loader.classList.add("flex"),this.loader.innerHTML=t,this.el.parentNode.insertBefore(this.loader,this.el)},render:function(){var t,i=Util.getTemplateString(this.options.template),a=this.el.getAttribute("data-columns")||2;if(a<1&&(a=1),a>3&&(a=3),!i)switch(this.options.layout){case"carousel":i='<% if (ids.length) { %><ul class="relative z-10 list-unstyled swiper-wrapper flex-no-wrap"><% ids.forEach(function(id, index) { %><li class="swiper-slide"><% if (playInline) { %><div class="relative w-full ratio ratio-16-9"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div><% if (showDuration) { %><span class="absolute bottom-0 right-0 top-auto m-4 badge" data-duration="<%= id %>"></span><% } %></div><% } else { %><a class="relative block w-full ratio ratio-16-9" data-url="<%= id %>" data-fancybox href="#"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div><% if (showDuration) { %><span class="absolute bottom-0 right-0 top-auto m-4 badge" data-duration="<%= id %>"></span><% } %></a><% } %><% if (showTitle) { %><h3 class="h4 my-4" data-title="<%= id %>"></h3><% } %></li><% }); %></ul><% } %><div class="absolute z-20 top-0 right-0 h-full flex align-items-center justify-content-center pointer-events-none<% if (showTitle) { %> -mt-6<% } %>"><svg class="swiper-next w-6 h-9 p-2 mx-1 border-radius button button-primary fill-current cursor-pointer transition" style="pointer-events: all;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M32.792,94.602L32.792,94.602c-0.53,0-1.039-0.211-1.414-0.586l-8.2-8.201c-0.781-0.781-0.781-2.047,0-2.828l32.999-32.999  L23.178,16.989c-0.781-0.781-0.781-2.047,0-2.828l8.2-8.201c0.75-0.75,2.078-0.751,2.828,0l42.616,42.612  c0.487,0.487,0.671,1.163,0.55,1.792c-0.071,0.381-0.255,0.746-0.55,1.041L34.206,94.016C33.831,94.391,33.322,94.602,32.792,94.602  z"/></svg></div><div class="absolute z-20 top-0 left-0 h-full flex align-items-center justify-content-center pointer-events-none<% if (showTitle) { %> -mt-6<% } %>"><svg class="swiper-prev w-6 h-9 p-2 mx-1 border-radius button button-primary fill-current cursor-pointer transition" style="pointer-events: all;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M67.208,94.614c-0.53,0-1.039-0.21-1.414-0.586L23.178,51.416c-0.487-0.487-0.671-1.163-0.55-1.792  c0.071-0.381,0.255-0.746,0.55-1.041L65.794,5.972c0.375-0.375,0.884-0.586,1.414-0.586l0,0c0.53,0,1.039,0.211,1.414,0.586  l8.2,8.201c0.781,0.781,0.781,2.047,0,2.828L43.823,50l32.999,32.999c0.781,0.781,0.781,2.047,0,2.828l-8.2,8.201  C68.247,94.403,67.738,94.614,67.208,94.614z"/></svg></div>';break;case"tabs":i='<% if (ids.length) { %><div class="bg-gray-100 p-3"><div class="row row-flush"><div class="md:col-8"><ul class="tabs list-unstyled mb-0"><% ids.forEach(function(id, index) { %><li class="tab content fade<% if (index === 0) { %> is-active is-shown<% } %>" id="video-<%= id %>" role="tab-panel"><% if (playInline) { %><div class="relative w-full ratio ratio-16-9"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div></div><% } else { %><a class="relative block w-full ratio ratio-16-9" data-url="<%= id %>" data-fancybox href="#"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div></a><% } %></li><% }); %></ul></div><div class="md:col overflow-y-scroll"><div class="relative md:ml-3"><div class="md:absolute h-full w-full"><nav class="nav flex-column mt-6 md:my-0"><% ids.forEach(function(id, index) { %><a class="nav-link flex text-inherit border border-radius border-transparent transition<% if (index === 0) { %> text-primary border-primary bg-white is-active is-shown<% } %>" data-active-class="text-primary border-primary bg-white" href="#video-<%= id %>" data-toggle="tab" role="tab" aria-expanded="<% if (index === 0) { %>true<% } else { %>false<% } %>"><div class="relative align-self-center h-8 w-8 overflow-hidden <% if (!showTitle && !showDuration) { %>mx-auto<% } else { %>mr-3<% } %>"><img class="absolute-center" data-thumbnail="<%= id %>" alt="Video thumbnail"></div><% if (showTitle || showDuration) { %><div class="relative media-body"><% if (showTitle) { %><h5 class="my-1 text-inherit" data-title="<%= id %>"></h5><% } %><% if (showDuration) { %><span class="badge" data-duration="<%= id %>"></span><% } %></div><% } %></a><% }); %></nav></div></div></div></div></div><% } %>';break;default:i='<% if (ids.length) { %><ul class="list-unstyled row"><% ids.forEach(function(id, index) { %><li class="mb-6 md:col-'+12/a+'"><div class="relative w-full ratio ratio-16-9"><% if (playInline) { %><div class="relative w-full ratio ratio-16-9"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div></div><% } else { %><a class="relative block w-full ratio ratio-16-9" data-url="<%= id %>" data-fancybox href="#"><div class="relative z-20" id="<%= id %>"></div><div class="absolute-center z-10 flex p-4 circle button button-primary"><svg class=" w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100"><path d="M78.627,47.203L24.873,16.167c-1.082-0.625-2.227-0.625-3.311,0C20.478,16.793,20,17.948,20,19.199V81.27  c0,1.25,0.478,2.406,1.561,3.031c0.542,0.313,1.051,0.469,1.656,0.469c0.604,0,1.161-0.156,1.703-0.469l53.731-31.035  c1.083-0.625,1.738-1.781,1.738-3.031C80.389,48.984,79.71,47.829,78.627,47.203z"/></svg></div></a><% } %><% if (showDuration) { %><span class="absolute bottom-0 right-0 top-auto m-4 badge" data-duration="<%= id %>"></span><% } %></div><% if (showTitle) { %><h3 class="h4 my-4" data-title="<%= id %>"></h3><% } %></li><% }); %></ul><% } %>'}var l=Util.template(i),s={ids:this.ids,columns:a,showTitle:this.options.showTitle,showDuration:this.options.showDuration,playInline:this.options.playInline};this.options.templateData&&(s=Util.extend(s,this.options.templateData)),(t=l(s).replace(/(^\s+|\s+$)/g,""))&&(this.el.innerHTML=t),Util.triggerEvent(this.el,e.RENDER,{relatedTarget:this.el})}}),window.addEventListener("load",function(){each('[data-element="video-library"]',function(t){new VideoLibrary(t)})})}();