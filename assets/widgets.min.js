(function(){"use strict";window.Widgets=window.Widgets||{};var a=27,b=38,c=40;document.addEventListener("alpine:init",function(){Alpine.data("scrollableElement",function(a){return Object.assign({top:"0px",breakpoint:null,init:function(){var a=this.updateElement.bind(this),b=Util.throttle(a,200),c=Util.debounce(a,200);window.addEventListener("resize",c),window.addEventListener("scroll",b),window.addEventListener("scrollend",a),this.$nextTick(a)},updateElement:function(){var a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,b=this.$el.getBoundingClientRect(),c=a-b.top;if("string"==typeof this.breakpoint){var d=window.innerWidth||document.body.clientWidth,e=this.getBreakpointWidth();if(d<e)return void this.removeStyles()}this.addStyles(c)},getBreakpointWidth:function(){var a=getComputedStyle(document.documentElement).getPropertyValue("--breakpoint-"+this.breakpoint);return a&&"px"===a.slice(-2)?parseInt(a,10):null},addStyles:function(a){this.$el.style.top=this.top,this.$el.style.maxHeight=a+"px",this.$el.style.overflowY="auto"},removeStyles:function(){this.$el.style.top=this.$el.style.maxHeight=this.$el.style.overflowY=null}},a)}),Alpine.data("link",function(a){return Object.assign({isExternal:null,init:function(){var a=this.$el.host;this.isExternal=a&&a!==window.location.host,this.isExternal&&(this.$el.target="_blank")}},a)}),Alpine.data("toggle",function(a){return Object.assign({isOpen:!1,toggle:function(){this.isOpen?this.close():this.open()},open:function(){this.isOpen=!0},close:function(){this.isOpen=!1}},a)}),Alpine.data("category",function(a){return Object.assign({sectionId:null,categoryId:null,category:null,init:function(){var a=Util.getPageId();!this.categoryId&&Util.isCategoryPage()&&(this.categoryId=a),!this.sectionId&&Util.isSectionPage()&&(this.sectionId=a);(this.categoryId||this.sectionId)&&Util.get(["categories","sections"],["id","title","description","name","html_url","position","promoted","pinned","draft","section_id","sorting","category_id","parent_section_id","topic_id","created_at"]).then(this.getActiveCategory.bind(this))},getActiveCategory:function(a){if(this.categoryId){var b=this.categoryId;this.category=a.categories.filter(function(a){return a.id===b})[0]||null}else if(this.sectionId){var c=this.sectionId,d=a.sections.filter(function(a){return a.id===c})[0]||null;this.category=a.categories.filter(function(a){return a.id===d.category_id})[0]||null}}},a)})}),window.Widgets.dropdown=function(d){return Object.assign({isExpanded:!1,get focusableElements(){return[...this.$refs.menu.querySelectorAll("a[href], button, input, textarea, select, details,[tabindex]:not([tabindex=\"-1\"])")].filter(a=>!a.hasAttribute("disabled")&&!a.getAttribute("aria-hidden"))},init:function(){this.$refs.toggle.addEventListener("click",this.clickHandler.bind(this)),this.$refs.toggle.addEventListener("keydown",this.toggleKeyHandler.bind(this)),this.$refs.menu.addEventListener("keydown",this.menuKeyHandler.bind(this)),this.isExpanded||this.$refs.menu.classList.add("invisible")},open:function(){this.setPosition(),this.$nextTick(this.updatePosition.bind(this)),this.isExpanded=!0},close:function(){var a=this.$refs.menu;a.classList.add("invisible"),a.style.top=null,a.style.bottom=null,a.style.left=null,a.style.position=null,a.style.maxHeight=null,a.style.overflow=null,this.isExpanded=!1},setPosition:function(){var a=this.$refs.menu;a.style.display="block",a.style.top="0px",a.style.left="0px",a.style.position="fixed"},updatePosition:function(){var a=this.$refs.menu,b=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=this.$el.getBoundingClientRect(),e=window.getComputedStyle(a),f=parseInt(e.getPropertyValue("margin-top"),0),g=parseInt(e.getPropertyValue("margin-bottom"),0),h=parseInt(e.getPropertyValue("margin-left"),0),i=parseInt(e.getPropertyValue("margin-right"),0),j=parseInt(e.getPropertyValue("border-top-width"),0),k=parseInt(e.getPropertyValue("border-bottom-width"),0),l=parseInt(e.getPropertyValue("border-left-width"),0),m=parseInt(e.getPropertyValue("border-right-width"),0),n=a.scrollWidth+h+i+l+m,o=a.scrollHeight+f+g+j+k;if(a.style.display="none",0>d.x){var p=Math.abs(d.x);a.style.left=p+"px",p+n>b&&(a.style.maxWidth=b+"px")}else if(d.x+n>b){var q=Math.abs(Math.round(b-(d.x+n)));0<=d.x-q?a.style.left="-"+q+"px":(a.style.left="-"+d.x+"px",a.style.maxWidth="calc(100vw - "+2*d.x+"px)")}if(d.bottom+o>=c){var r=d.top+d.height/2;r<=c/2?(a.style.top="100%",a.style.bottom=null,a.style.maxHeight="calc(100vh - "+(d.bottom+f+j)+"px)"):(a.style.top=null,a.style.bottom="100%",a.style.maxHeight="calc(100vh - "+(c-d.top+g+k)+"px)")}else a.style.top="100%",a.style.bottom=null,a.style.maxHeight=null;a.style.overflow="auto",a.style.position=null,a.style.display=null,a.classList.remove("invisible")},focusNextMenuItem:function(a){if(this.focusableElements.length){var b=this.focusableElements.indexOf(a),c=b===this.focusableElements.length-1||0>b?0:b+1;this.focusableElements[c].focus()}},focusPreviousMenuItem:function(a){if(this.focusableElements.length){var b=this.focusableElements.indexOf(a),c=0>=b?this.focusableElements.length-1:b-1;this.focusableElements[c].focus()}},clickHandler:function(){this.isExpanded?this.close():this.open()},toggleKeyHandler:function(d){switch(d.keyCode){case 13:case 32:case c:d.preventDefault(),this.isExpanded||this.open(),this.focusNextMenuItem();break;case b:d.preventDefault(),this.isExpanded||this.open(),this.focusPreviousMenuItem();break;case a:this.close(),this.$refs.toggle&&this.$refs.toggle.focus();}},menuKeyHandler:function(d){var e=this.focusableElements[0],f=this.focusableElements[this.focusableElements.length-1],g=d.target;switch(d.keyCode){case a:this.close(),this.$refs.toggle&&this.$refs.toggle.focus();break;case c:d.preventDefault(),this.focusNextMenuItem(g);break;case b:d.preventDefault(),this.focusPreviousMenuItem(g);break;case 9:d.shiftKey?g===e?this.close():(d.preventDefault(),this.focusPreviousMenuItem(g)):g===f?this.close():(d.preventDefault(),this.focusNextMenuItem(g));}}},d)},window.Widgets.notification=function(){return{key:"alpine:notification:dismissed",isDismissed:null,getNotification:function(){this.isDismissed="true"===window.sessionStorage.getItem(this.key)},dismiss:function(){this.isDismissed=!0,window.sessionStorage.setItem(this.key,"true")}}},window.Widgets.header=function(a){return Object.assign({isFixed:!1,isSticky:!1,isStuck:null,isUnstuck:null,init:function(){var a=this.$el;this.isFixed&&this.hasHeroElement()?this.applyFixedHeader():(this.isFixed=!1,a.classList.remove("fixed-header")),a.classList.add("transition-none"),a.classList.add("visible"),a.classList.remove("transition-none"),Util.reflow(this.$el),this.isSticky&&this.applyStickyHeader()},hasHeroElement:function(){var a=document.querySelector("main[role=\"main\"]");return a.firstElementChild&&a.firstElementChild.classList.contains("hero")},applyStickyHeader:function(){new Sticky(this.$el,{classNames:{sticky:"sticky-top transition"}}),this.$el.addEventListener("sticky:stuck",this.onStuck.bind(this)),this.$el.addEventListener("sticky:unstuck",this.onUnstuck.bind(this))},applyFixedHeader:function(){this.$el.classList.add("absolute-top")},onStuck:function(){this.isStuck=!0,this.isUnstuck=!1},onUnstuck:function(){this.isStuck=!1,this.isUnstuck=!0}},a)},window.Widgets.search=function(){return{isOpen:!1,init:function(){var a=Array.prototype.slice.call(this.$root.querySelectorAll("[type=\"search\"]"));this.searchField=a.length?a[a.length-1]:null;var b=Util.getURLParameter("query");b&&this.searchField&&!this.searchField.value&&(this.searchField.value=b),this.addEventListeners()},addEventListeners:function(){this.$watch("isOpen",this.onChange.bind(this)),window.addEventListener("resize",Util.debounce(this.close.bind(this),500))},onChange:function(a){a?this.showSearch():this.hideSearch()},toggle:function(){this.isOpen?this.close():this.open()},open:function(){this.isOpen=!0},showSearch:function(){if(this.searchField){var a=Util.closest(this.searchField,".search");a&&(a.style.display="block"),this.searchField.focus()}},close:function(){this.isOpen=!1},hideSearch:function(){if(this.searchField){var a=Util.closest(this.searchField,".search");a&&(this.$refs.dropdown?Util.onTransitionEnd(this.$refs.dropdown,function(){a.style.display="none"}):a.style.display="none")}this.$root.contains(document.activeElement)&&this.$refs.toggle&&this.$refs.toggle.focus()}}},window.Widgets.mobileMenu=function(){return{isOpen:!1,init:function(){window.addEventListener("resize",Util.debounce(this.close.bind(this),500)),document.addEventListener("keydown",this.toggleKeyHandler.bind(this))},toggleKeyHandler:function(b){switch(b.keyCode){case a:this.close();}},toggle:function(){this.isOpen?this.close():this.open()},open:function(){this.isOpen=!0},close:function(){this.isOpen=!1}}},window.Widgets.categories=function(){return{categories:[],isLoading:!0,getCategories:function(){return Util.get("categories").then(this.addCategories.bind(this))},addCategories:function(a){this.categories=a.categories,this.isLoading=!1}}},window.Widgets.parallaxImage=function(){return{init:function(){this.prefersReducedMotion()||this.addEventListeners()},prefersReducedMotion:function(){var a=window.matchMedia("(prefers-reduced-motion: reduce)");return a.matches},addEventListeners:function(){window.addEventListener("scroll",this.onScroll.bind(this))},onScroll:function(){var a=window.scrollY;this.$el.style["-moz-transform"]=`translate3d(0px,${a/3}px, 0px)`,this.$el.style["-webkit-transform"]=`translate3d(0px,${a/3}px, 0px)`,this.$el.style.transform=`translate3d(0px,${a/3}px, 0px)`}}},window.Widgets.popularKeywords=function(){return{keywords:[],parseKeywords:function(a){var b=location.protocol+"//"+location.hostname+"/hc/"+Theme.locale+"/search?query=";this.keywords=a.split(",").map(function(a){return a=a.trim(),a?{title:a,html_url:b+a}:a}).filter(function(a){return a})}}}})();